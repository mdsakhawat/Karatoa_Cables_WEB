
<!doctype html>
<html lang="en">

<head>
   <style>
    body,
    html {
      height: 100%;
      background-image: url("/public/images/background/4.jpg");
      background-position:left;
      background-repeat: no-repeat; /* Do not repeat the image */
      background-size: cover;
    }
  </style>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- Bootstrap CSS -->
  <title></title>

   <!-- Favicon -->
    <link href="/public/img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Roboto:wght@500;700&display=swap" rel="stylesheet"> 
    
    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="/public/lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="/public/lib/tempusdominus/css/tempusdominus-bootstrap-4.min.css" rel="stylesheet" />

    <!-- Customized Bootstrap Stylesheet -->
    <link href="/public/css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="/public/css/style.css" rel="stylesheet">

</head>

<body>

      <!-- Sign Up Start -->
        <div class="container-fluid">
            <div class="row h-100 align-items-center justify-content-center" style="min-height: 100vh;">
                <div class="col-12 col-sm-8 col-md-6 col-lg-5 col-xl-4">
                    <div class="bg-secondary rounded p-4 p-sm-5 my-4 mx-3">
                        <div class="text-center align-items-center justify-content-between mb-3">
                            <a href="/" class="">
                                <h3 class="text-primary"><i class="fa fa-graduation-cap me-2"></i>E-Learning</h3>
                            </a>
                           
                        </div>
                        <div class="text-center">
                           <h3>Sign Up</h3>
                        </div>
                       
<form action="" method="post" id="frmRegister">
      <div class="form-group">
        <label for="txtUsername">Username</label>
        <input type="text" class="form-control" id="txtUsername" name="username" autofocus>
      </div>
       <div class="form-group">
        <label for="txtFullName">Full Name</label>
        <input type="text" class="form-control" id="txtFullName" name="fullName">
      </div>
       <div class="form-group">
        <label for="txtEmail">Email</label>
        <input type="text" class="form-control" id="txtEmail" name="email" placeholder="example@gmail.com">
      </div>
      <div class="form-group">
        <label for="txtPassword">Password</label>
        <input type="password" class="form-control" id="txtPassword" name="password">
      </div>
      <div class="form-group">
        <label for="txtConfirm">Confirm Password</label>
        <input type="password" class="form-control" id="txtConfirm" >
        
      </div>
  
      <div class="form-group">
         
          <label >Sign Up Type</label>
        
        <div>
        <input type="radio" id="txtStudent" name="permission" value='student' checked>
        <label for="txtStudent">Student</label>          
        <input type="radio" id="txtTeacher" name="permission" value='teacher'>
        <label for="txtTeacher">Teacher</label>  
        </div>
      </div>
      <div class="mb-3">
        <label id="labelBio" for="txtBio" style="display: none;">Biography</label>
        <textarea name="biography" id="txtBio" class="form-control"  style="display: none;"rows="2"></textarea>
      </div>
                        <button type="submit" class="btn btn-primary py-2 w-100 mb-2">Sign Up</button>
              <p class="text-center mb-0" >Already have an Account? <a href="/account/login" rel="noreferrer">Sign In</a></p>
 
               </form>

                    </div>
                </div>
            </div>
        </div>
        <!-- Sign Up End -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha256-jXCJJT3KKcnNjZ3rfsabCj1EX4j2omR4xxm+H5CtywE=" crossorigin="anonymous"></script>
  <script src="/public/javascript/bootnavbar.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

<script>
  $('#frmRegister').on('submit', function (e) {
    e.preventDefault();
    const username = $('#txtUsername').val();
    if (username.length === 0) {
    swal.fire({
       icon: 'error',
      text: "Username can not be empty!", 
      }).then(function(){ 
    location.reload();
   }
);
    
      return  ;
    }
    const fullName = $('#txtFullName').val();
    if (fullName.length === 0) {
      Swal.fire({
        icon: 'error',
        text: 'FullName can not be empty',
      }).then(function(){ 
    location.reload();
   }
);
      return;
    }
     const email = $('#txtEmail').val();
    if (email.length === 0) {
      Swal.fire({
        icon: 'error',
        text: 'Email can not be empty !',
      }).then(function(){ 
    location.reload();
   }
);
      return;
    }
    if (!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(email)) {
      Swal.fire({
        icon: 'error',
        text: 'Invalid email !',
      }).then(function(){ 
    location.reload();
   }
);
      return;
    }
    const password = $('#txtPassword').val();
    if (password.length === 0) {
      Swal.fire({
        icon: 'error',
        text: 'Password can not be empty !',
      }).then(function(){ 
    location.reload();
   }
);
      return;
    }
    const confirm = $('#txtConfirm').val();
    if (password !== confirm) {
      Swal.fire({
        icon: 'error',
        text: 'Confirm password does not match !',
      }).then(function(){ 
    location.reload();
   }
);
      return;
    }
    
   

    sessionStorage.setItem("username", $('#txtUsername').val());
    sessionStorage.setItem("password", $('#txtPassword').val());
    sessionStorage.setItem("email", $('#txtEmail').val());
    sessionStorage.setItem("fullName", $('#txtFullName').val());
    sessionStorage.setItem("permission",$("input[name='permission']:checked").val())
    sessionStorage.setItem("biography", $('#txtBio').val()); 
       const data = $.getJSON(`/account/is-available?user=${username}`, async function (data) {
        if (data === false) {
           Swal.fire({
            icon: 'error',
            text: 'Username already exists !'
          }).then(function(){ 
    location.reload();
   }
);
            return;
        } 
      });
       const data2= $.getJSON(`/account/is-available-email?email=${email}`, async function (data2) {
        if (data2 === true) {
          await Swal.fire({
            icon: 'success',
            text: 'Sign Up successful !'
          });
          $('#frmRegister').off('submit').submit();
          return ;
        } else {
          Swal.fire({
            icon: 'error',
            text: 'Email already exists !'
          }).then(function(){ 
    location.reload();
   }
);
return;
        }
      });

  });
  $(document).ready(function(){
  $("#txtStudent").click(function(){
    $("#txtBio").css("display","none");
    $("#labelBio").css("display","none");    
  });
  $("#txtTeacher").click(function(){
    $("#txtBio").css("display","block");
    $("#labelBio").css("display","inline-block");
  });

  });

</script>
</body>

</html>





